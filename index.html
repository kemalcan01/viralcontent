<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rec709pro: Viral ƒ∞√ßerik Fabrikasƒ± v3.5</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;600;700&display=swap');
        body { font-family: 'Space Grotesk', sans-serif; background-color: #050505; color: #f5f5f5; margin: 0; overflow-x: hidden; }
        .gold-text { color: #d4af37; }
        .gold-bg { background: linear-gradient(135deg, #d4af37 0%, #f9e29c 100%); }
        .glass-card { background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.05); }
        .idea-card { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .idea-card:hover { transform: translateY(-8px); border-color: rgba(212, 175, 55, 0.4); background: rgba(255, 255, 255, 0.04); }
        .loading-shimmer { background: linear-gradient(90deg, #0a0a0a, #1a1a1a, #0a0a0a); background-size: 200% 100%; animation: shimmer 2s infinite; }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0a0a0a; }
        ::-webkit-scrollbar-thumb { background: #d4af37; border-radius: 10px; }
    </style>
</head>
<body class="min-h-screen pb-20">

    <!-- Header -->
    <header class="p-6 border-b border-white/5 sticky top-0 bg-black/90 backdrop-blur-lg z-50">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <h1 class="text-xl font-bold tracking-tighter uppercase">rec709pro <span class="gold-text">Viral Factory</span></h1>
            <div class="flex items-center gap-2 text-[10px] font-bold tracking-widest uppercase text-green-500">
                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                Sistem Canlƒ± (AI Baƒülantƒ±sƒ± Aktif)
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-6 space-y-10">
        
        <!-- Giri≈ü Alanƒ± -->
        <section class="glass-card p-10 rounded-[2.5rem] space-y-8 border border-white/5">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <label class="block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-3">Hedef Sekt√∂r / Ni≈ü</label>
                    <input type="text" id="sector-input" placeholder="√ñrn: Dubai Real Estate, Investment Banking..." 
                           class="w-full bg-black border border-white/10 rounded-2xl p-5 text-white focus:border-amber-500 outline-none transition-all duration-300">
                </div>
                <div>
                    <label class="block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-3">ƒ∞√ßerik Ana Konusu</label>
                    <input type="text" id="topic-input" placeholder="√ñrn: 2024'te neden ev almamalƒ±sƒ±nƒ±z? / ROI analizi..." 
                           class="w-full bg-black border border-white/10 rounded-2xl p-5 text-white focus:border-amber-500 outline-none transition-all duration-300">
                </div>
            </div>
            <button onclick="generateViralIdeas()" id="main-btn" class="w-full gold-bg text-black font-black p-6 rounded-2xl hover:brightness-110 transition-all active:scale-[0.98] shadow-2xl shadow-amber-500/20 text-lg uppercase tracking-wider">
                10 ADET Vƒ∞RAL STRATEJƒ∞ VE SENARYO √úRET
            </button>
        </section>

        <!-- Sonu√ß Paneli -->
        <div id="results-container" class="hidden space-y-16">
            
            <!-- Stratejik Skorlama Grafiƒüi -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-10">
                <div class="lg:col-span-2 glass-card p-8 rounded-[2rem]">
                    <h3 class="font-bold mb-6 text-slate-400 text-sm uppercase tracking-widest flex items-center gap-2">
                        <span>üìä</span> Algoritmik Viral Daƒüƒ±lƒ±m
                    </h3>
                    <div class="h-72">
                        <canvas id="scoreChart"></canvas>
                    </div>
                </div>
                <div class="lg:col-span-1 flex flex-col justify-center">
                    <div class="bg-amber-500/5 border border-amber-500/10 p-8 rounded-[2rem] relative overflow-hidden">
                        <div class="absolute -top-10 -right-10 w-32 h-32 bg-amber-500/10 rounded-full blur-3xl"></div>
                        <h4 class="text-xs text-amber-500 font-bold uppercase mb-4 tracking-[0.2em]">Pazar Analiz Notu</h4>
                        <p id="ai-strategic-note" class="text-sm text-slate-300 italic leading-relaxed"></p>
                    </div>
                </div>
            </div>

            <!-- Fikir Kartlarƒ± -->
            <div id="ideas-grid" class="grid grid-cols-1 md:grid-cols-2 gap-10">
                <!-- AI Verileri Buraya Enjekte Edilecek -->
            </div>
        </div>

        <!-- Y√ºkleme Durumu -->
        <div id="loader" class="hidden space-y-8">
            <div class="loading-shimmer h-56 rounded-[2.5rem]"></div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                <div class="loading-shimmer h-96 rounded-[2rem]"></div>
                <div class="loading-shimmer h-96 rounded-[2rem]"></div>
            </div>
        </div>

    </main>

    <footer class="p-12 text-center border-t border-white/5 text-slate-700 text-[9px] uppercase tracking-[0.4em]">
        rec709pro Dynamic Intelligence System &copy; 2024 | Dubai | UAE
    </footer>

    <script>
        // --- API CONFIGURATION ---
        const apiKey = "AIzaSyD1uthSuA1ivrZg5idcDBdP7qX3AI63KO0"; 

        async function callGemini(prompt, systemInstruction) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: { parts: [{ text: systemInstruction }] },
                generationConfig: { 
                    responseMimeType: "application/json",
                    temperature: 0.7
                }
            };

            let delay = 1000;
            for (let i = 0; i < 5; i++) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) throw new Error('API Request Failed');
                    const data = await response.json();
                    return data.candidates?.[0]?.content?.parts?.[0]?.text;
                } catch (err) {
                    if (i === 4) throw err;
                    await new Promise(r => setTimeout(r, delay));
                    delay *= 2;
                }
            }
        }

        async function generateViralIdeas() {
            const sector = document.getElementById('sector-input').value;
            const topic = document.getElementById('topic-input').value;
            if(!sector || !topic) return;

            const loader = document.getElementById('loader');
            const results = document.getElementById('results-container');
            const btn = document.getElementById('main-btn');

            loader.classList.remove('hidden');
            results.classList.add('hidden');
            btn.disabled = true;
            btn.innerText = "ALGORƒ∞TMA ANALƒ∞Z EDƒ∞Lƒ∞YOR...";

            const systemPrompt = `Sen bir Viral Strateji Dehasƒ±sƒ±n. rec709pro i√ßin i√ßerik √ºretiyorsun. 
            Verilen konu i√ßin Dubai ve Global trendlerle uyumlu tam 10 i√ßerik fikri √ºret.
            Yanƒ±tƒ±nƒ± SADECE JSON formatƒ±nda ver:
            {
                "strategic_note": "Sekt√∂re dair radikal ger√ßek√ßi uyarƒ±",
                "ideas": [
                    {
                        "title": "ƒ∞√ßerik Ba≈ülƒ±ƒüƒ±",
                        "viral_score": 92,
                        "type": "Reels / Post / Carousel",
                        "hook": "Saniye 0-2 arasƒ± kanca c√ºmlesi",
                        "flow": ["Adƒ±m 1", "Adƒ±m 2", "Adƒ±m 3"],
                        "viral_logic": "Bu fikir neden viral olur? (Psikolojik neden)"
                    }
                ]
            }`;

            try {
                const raw = await callGemini(`Sekt√∂r: ${sector}, Konu: ${topic}`, systemPrompt);
                const data = JSON.parse(raw);
                renderUI(data);
                
                loader.classList.add('hidden');
                results.classList.remove('hidden');
                btn.disabled = false;
                btn.innerText = "10 ADET Vƒ∞RAL STRATEJƒ∞ VE SENARYO √úRET";
                window.scrollTo({ top: results.offsetTop - 100, behavior: 'smooth' });
            } catch (err) {
                console.error(err);
                loader.classList.add('hidden');
                btn.disabled = false;
                btn.innerText = "HATA - TEKRAR DENE";
                alert("API Baƒülantƒ±sƒ±nda bir sorun olu≈ütu.");
            }
        }

        function renderUI(data) {
            document.getElementById('ai-strategic-note').innerText = data.strategic_note;
            const grid = document.getElementById('ideas-grid');
            grid.innerHTML = '';

            const chartLabels = [];
            const chartData = [];

            data.ideas.forEach((idea, i) => {
                chartLabels.push(idea.title.substring(0, 10) + '...');
                chartData.push(idea.viral_score);

                const card = document.createElement('div');
                card.className = 'glass-card p-8 rounded-[2rem] idea-card border-l-4';
                card.style.borderLeftColor = idea.viral_score > 90 ? '#d4af37' : '#1a1a1a';

                card.innerHTML = `
                    <div class="flex justify-between items-start mb-8">
                        <span class="text-[9px] font-black uppercase tracking-[0.3em] text-slate-500">${idea.type}</span>
                        <div class="text-right">
                            <span class="text-4xl font-black ${idea.viral_score > 90 ? 'gold-text' : 'text-white'}">${idea.viral_score}</span>
                            <p class="text-[8px] uppercase tracking-widest text-slate-500">Viral Index</p>
                        </div>
                    </div>
                    <h4 class="text-xl font-bold mb-6 leading-snug">${idea.title}</h4>
                    <div class="space-y-8">
                        <div class="bg-white/5 p-5 rounded-2xl border border-white/5 relative overflow-hidden">
                            <div class="absolute top-0 left-0 w-1 h-full bg-amber-500"></div>
                            <p class="text-[9px] font-bold text-amber-500 uppercase mb-2 tracking-[0.2em]">ü™ù THE HOOK (0-2s)</p>
                            <p class="text-sm italic text-slate-200">"${idea.hook}"</p>
                        </div>
                        <div class="text-xs text-slate-400">
                            <p class="font-bold text-slate-300 mb-4 uppercase tracking-widest text-[10px]">üé¨ Video Akƒ±≈ü Planƒ±:</p>
                            <ul class="space-y-3">
                                ${idea.flow.map((f, idx) => `<li class="flex gap-3 items-start"><span class="text-amber-500 font-bold">${idx+1}.</span> <span class="leading-relaxed">${f}</span></li>`).join('')}
                            </ul>
                        </div>
                        <div class="pt-6 border-t border-white/5">
                            <p class="text-[9px] font-bold text-sky-500 uppercase mb-2 tracking-[0.2em]">üß† Viral Psikoloji</p>
                            <p class="text-[11px] leading-relaxed text-slate-400 font-medium">${idea.viral_logic}</p>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });

            drawChart(chartLabels, chartData);
        }

        let myChart;
        function drawChart(labels, data) {
            const ctx = document.getElementById('scoreChart').getContext('2d');
            if(myChart) myChart.destroy();
            myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: data.map(s => s > 90 ? '#d4af37' : 'rgba(212, 175, 55, 0.15)'),
                        borderRadius: 12,
                        borderWidth: 0,
                        barThickness: 20
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: true, max: 100, grid: { color: 'rgba(255,255,255,0.02)' }, ticks: { color: '#333', font: { size: 10 } } },
                        x: { grid: { display: false }, ticks: { color: '#555', font: { size: 9 } } }
                    }
                }
            });
        }
    </script>
</body>
</html>
